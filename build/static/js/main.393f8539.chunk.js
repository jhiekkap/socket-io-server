(this["webpackJsonpsocket-io-client"]=this["webpackJsonpsocket-io-client"]||[]).push([[0],{41:function(e,t,n){e.exports=n(84)},46:function(e,t,n){},77:function(e,t){},84:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(35),i=n.n(c),o=(n(46),n(1)),l=n(3),u=n.n(l);var s=n(97),m=function(e){var t=e.currentUser,n=e.receiver,c=Object(a.useRef)(),i=Object(a.useRef)();return Object(a.useEffect)((function(){c.current.width=180,c.current.height=150;var e=c.current.getContext("2d");console.log("CANVASREF",c),console.log("CONTEX",e),e.width=c.current.width,e.height=c.current.height;var a=u()("https://fierce-beach-86051.herokuapp.com/",{query:{chatID:t}});function r(e){console.log(e)}return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msgGetUserMedia,navigator.getUserMedia&&navigator.getUserMedia({video:!0,audio:!1},(function(e){try{i.current.srcObject=e}catch(t){i.current.src=URL.createObjectURL(e)}r("Camera connected")}),(function(){r("Camera not connected")})),setInterval((function(){!function(e,r){r.drawImage(e,0,0,r.width,r.height),a.emit("send_message",{senderChatID:t,receiverChatID:n,videoStream:c.current.toDataURL("image/webp")})}(i.current,e)}),.1),function(){return a.disconnect()}}),[t,n]),r.a.createElement("div",null,r.a.createElement("video",{ref:i,src:"",width:"180",height:"150",autoPlay:!0}),r.a.createElement("canvas",{ref:c,style:{display:"none"}}))},d=function(e){var t=e.videoStream,n=Object(a.useRef)();return r.a.createElement("div",null,r.a.createElement("img",{ref:n,src:t,width:"150",height:"120",alt:"view"}))},E="https://fierce-beach-86051.herokuapp.com/",h={heart:"\u2764\ufe0f\ufe0f",happy:"\ud83d\ude0a",sad:"\u2639\ufe0f"},v=["Jari","Sampsa","Kasperi","Janina"];function f(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)([]),l=Object(o.a)(i,2),f=l[0],b=l[1],g=Object(a.useState)(v[0]),p=Object(o.a)(g,2),j=p[0],O=p[1],S=Object(a.useState)(v[1]),C=Object(o.a)(S,2),y=C[0],I=C[1],k=Object(a.useState)(""),w=Object(o.a)(k,2),L=w[0],U=w[1],A=Object(a.useState)(null),T=Object(o.a)(A,2),D=(T[0],T[1],Object(a.useState)(50)),R=Object(o.a)(D,2),x=(R[0],R[1],Object(a.useState)(50)),M=Object(o.a)(x,2),N=(M[0],M[1],Object(a.useState)(!1)),J=Object(o.a)(N,2),K=J[0],P=J[1],F=Object(a.useState)(""),_=Object(o.a)(F,2),z=_[0],G=_[1],V=Object(a.useState)(""),q=Object(o.a)(V,2),B=q[0],H=q[1],W={cursor:"pointer",marginRight:"2%",fontSize:K&&"20px"};console.log("CURRENT USER: ",j),console.log("RECIPIENTS: ",L),Object(a.useEffect)((function(){console.log("USE EFFECT");var e=u()(E,{query:{chatID:j}});return e.on("receive_message",(function(e){e.content?b((function(t){return t.concat(e.senderChatID+"=> "+e.receiverChatID+": "+e.content)})):e.emoiji?(P(!0),G(e.emoiji),setTimeout((function(){P(!1),G("")}),2e3)):e.videoStream&&H(e.videoStream)})),function(){return e.disconnect()}}),[j,y]);var Y=function(e){u()(E).emit("send_message",{receiverChatID:y,senderChatID:j,recipients:L,emoiji:e})};return r.a.createElement("div",{style:{padding:"5%"}},r.a.createElement(s.a,{container:!0,spacing:3},r.a.createElement(s.a,{item:!0,md:6},r.a.createElement(m,{currentUser:j,receiver:y}),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),u()(E).emit("send_message",{receiverChatID:y,senderChatID:j,content:n,recipients:L}),b((function(e){return e.concat(j+"=> "+y+": "+n)})),c("")}},r.a.createElement("div",null,r.a.createElement("div",null,"L\xc4HETT\xc4J\xc4"),r.a.createElement("select",{value:j,onChange:function(e){return O(e.target.value)}},v.map((function(e,t){return r.a.createElement("option",{key:t},e)})))),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("div",null,"VASTAANOTTAJA"),r.a.createElement("select",{value:y,onChange:function(e){return I(e.target.value)}},v.map((function(e,t){return r.a.createElement("option",{key:t},e)})))),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("div",null,"VIESTI"),r.a.createElement("input",{type:"text",value:n,onChange:function(e){return c(e.target.value)}}),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("button",{type:"submit",disabled:!j},"PUSH ME")),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",checked:"ALL"!==L,onChange:function(){return U("ALL"!==L?"ALL":"")},name:"recipients"}),r.a.createElement("label",null,"YKSITYINEN"),r.a.createElement("input",{type:"checkbox",checked:"ALL"===L,onChange:function(){return U("ALL"===L?"":"ALL")},name:"recipients"}),r.a.createElement("label",null,"KAIKKI")))),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("span",{onClick:function(){return Y("heart")},style:W}," \u2764\ufe0f\ufe0f "),r.a.createElement("span",{onClick:function(){return Y("happy")},style:W}," \ud83d\ude0a "),r.a.createElement("span",{onClick:function(){return Y("sad")},style:W}," \u2639\ufe0f ")),r.a.createElement("div",null,r.a.createElement("ul",null,f.map((function(e,t){return r.a.createElement("li",{key:t},e)})))),z&&r.a.createElement("div",{style:{position:"fixed",top:"50px",right:"50px",fontSize:"300px"}},h[z])),r.a.createElement(s.a,{item:!0,md:6},r.a.createElement(d,{videoStream:B}))))}var b=function(){var e=Object(a.useState)(!0),t=Object(o.a)(e,2),n=t[0],c=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return c((function(e){return!e}))}},"STOPPA CLIENTEN"),n?r.a.createElement(f,null):null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.393f8539.chunk.js.map