(this["webpackJsonpsocket-io-client"]=this["webpackJsonpsocket-io-client"]||[]).push([[0],{41:function(e,t,n){e.exports=n(84)},46:function(e,t,n){},77:function(e,t){},84:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(35),i=n.n(c),o=(n(46),n(1)),l=n(2),u=n.n(l);var s=n(97),m=function(e){var t=e.currentUser,n=e.receiver,c=Object(a.useRef)(),i=Object(a.useRef)();return Object(a.useEffect)((function(){c.current.width=180,c.current.height=150;var e=c.current.getContext("2d");console.log("CANVASREF",c),console.log("CONTEX",e),e.width=c.current.width,e.height=c.current.height;var a=u()("https://fierce-beach-86051.herokuapp.com/",{query:{chatID:t}});function r(e){console.log(e)}navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msgGetUserMedia,navigator.getUserMedia&&navigator.getUserMedia({video:!0,audio:!1},(function(e){try{i.current.srcObject=e}catch(t){i.current.src=URL.createObjectURL(e)}r("Camera connected")}),(function(){r("Camera not connected")})),setInterval((function(){!function(e,r){r.drawImage(e,0,0,r.width,r.height),a.emit("send_message",{senderChatID:t,receiverChatID:n,videoStream:c.current.toDataURL("image/webp")})}(i.current,e)}),.1)}),[t]),r.a.createElement("div",null,r.a.createElement("video",{ref:i,src:"",width:"180",height:"150",autoPlay:!0}),r.a.createElement("canvas",{ref:c,style:{display:"none"}}))},E=function(e){var t=e.currentUser,n=Object(a.useRef)(),c=Object(a.useState)(null),i=Object(o.a)(c,2),l=i[0],s=i[1];return Object(a.useEffect)((function(){u()("https://fierce-beach-86051.herokuapp.com/",{query:{chatID:t}}).on("receive_message",(function(e){n.current.src=e.videoStream,s(e.senderChatID)}))}),[]),r.a.createElement("div",null,r.a.createElement("img",{ref:n,width:"150",height:"120",alt:"view"}),l)},d="https://fierce-beach-86051.herokuapp.com/",h={heart:"\u2764\ufe0f\ufe0f",happy:"\ud83d\ude0a",sad:"\u2639\ufe0f"},f=["Jari","Sampsa","Kasperi","Janina"];function v(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)([]),l=Object(o.a)(i,2),v=l[0],b=l[1],g=Object(a.useState)(f[0]),p=Object(o.a)(g,2),j=p[0],O=p[1],S=Object(a.useState)(f[1]),C=Object(o.a)(S,2),I=C[0],y=C[1],k=Object(a.useState)(""),w=Object(o.a)(k,2),U=w[0],L=w[1],A=Object(a.useState)(null),D=Object(o.a)(A,2),T=(D[0],D[1],Object(a.useState)(50)),R=Object(o.a)(T,2),x=(R[0],R[1],Object(a.useState)(50)),M=Object(o.a)(x,2),N=(M[0],M[1],Object(a.useState)(!1)),J=Object(o.a)(N,2),K=J[0],P=J[1],_=Object(a.useState)(""),F=Object(o.a)(_,2),G=F[0],q=F[1],z={cursor:"pointer",marginRight:"2%",fontSize:K&&"20px"};console.log("CURRENT USER: ",j),console.log("RECIPIENTS: ",U),Object(a.useEffect)((function(){console.log("USE EFFECT");var e=u()(d,{query:{chatID:j}});return e.on("receive_message",(function(e){console.log("NEW MESSAGE",e),e.content?b((function(t){return t.concat(e.senderChatID+"=> "+e.receiverChatID+": "+e.content)})):e.emoiji&&(P(!0),q(e.emoiji),setTimeout((function(){P(!1),q("")}),2e3))})),function(){return e.disconnect()}}),[j,I]);var V=function(e){u()(d).emit("send_message",{receiverChatID:I,senderChatID:j,recipients:U,emoiji:e})};return r.a.createElement("div",{style:{padding:"5%"}},r.a.createElement(s.a,{container:!0,spacing:3},r.a.createElement(s.a,{item:!0,md:6},r.a.createElement(m,{currentUser:j,receiver:I}),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),u()(d).emit("send_message",{receiverChatID:I,senderChatID:j,content:n,recipients:U}),b((function(e){return e.concat(j+"=> "+I+": "+n)})),c("")}},r.a.createElement("div",null,r.a.createElement("div",null,"L\xc4HETT\xc4J\xc4"),r.a.createElement("select",{value:j,onChange:function(e){return O(e.target.value)}},f.map((function(e,t){return r.a.createElement("option",{key:t},e)})))),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("div",null,"VASTAANOTTAJA"),r.a.createElement("select",{value:I,onChange:function(e){return y(e.target.value)}},f.map((function(e,t){return r.a.createElement("option",{key:t},e)})))),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("div",null,"VIESTI"),r.a.createElement("input",{type:"text",value:n,onChange:function(e){return c(e.target.value)}}),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("button",{type:"submit",disabled:!j},"PUSH ME")),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",checked:"ALL"!==U,onChange:function(){return L("ALL"!==U?"ALL":"")},name:"recipients"}),r.a.createElement("label",null,"YKSITYINEN"),r.a.createElement("input",{type:"checkbox",checked:"ALL"===U,onChange:function(){return L("ALL"===U?"":"ALL")},name:"recipients"}),r.a.createElement("label",null,"KAIKKI")))),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("span",{onClick:function(){return V("heart")},style:z}," \u2764\ufe0f\ufe0f "),r.a.createElement("span",{onClick:function(){return V("happy")},style:z}," \ud83d\ude0a "),r.a.createElement("span",{onClick:function(){return V("sad")},style:z}," \u2639\ufe0f ")),r.a.createElement("div",null,r.a.createElement("ul",null,v.map((function(e,t){return r.a.createElement("li",{key:t},e)})))),G&&r.a.createElement("div",{style:{position:"fixed",top:"50px",right:"50px",fontSize:"300px"}},h[G])),r.a.createElement(s.a,{item:!0,md:6},r.a.createElement(E,{currentUser:j}))))}var b=function(){var e=Object(a.useState)(!0),t=Object(o.a)(e,2),n=t[0],c=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return c((function(e){return!e}))}},"STOPPA CLIENTEN"),n?r.a.createElement(v,null):null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.df2eb6b1.chunk.js.map